CREATE DATABASE PolMunicipaleGestione;

USE PolMunicipaleGestione;
CREATE TABLE ANAGRAFICA (
IDANAGRAFICA INT PRIMARY KEY IDENTITY NOT NULL,
COGNOME NVARCHAR(20)NOT NULL,
NOME NVARCHAR(20) NOT NULL,
INDIRIZZO NVARCHAR(25) NOT NULL,
CITTA NVARCHAR(15) NOT NULL,
CAP INT NOT NULL,
CODICEFISCALE NVARCHAR(16) UNIQUE NOT NULL,

);
CREATE TABLE TIPOVIOLAZIONE (
IDVIOLAZIONE INT PRIMARY KEY IDENTITY NOT NULL,
DESCRIZIONE NVARCHAR(50) NOT NULL,

);
CREATE TABLE VERBALE (
IDVERBALE INT PRIMARY KEY IDENTITY NOT NULL,
DATAVIOLAIONE DATE NOT NULL,
INDIRIZZOVIOLAZIONE NVARCHAR(25) NOT NULL,
NOMINATIVOAGENTE NVARCHAR(25) NOT NULL,
DATATRASCRIZIONEVERBALE DATE NOT NULL,
IMPORTO MONEY NOT NULL,
DECURTAMENTOPUNTI INT NOT NULL,
);

ALTER TABLE VERBALE
ADD IDVIOLAZIONE INT;

ALTER TABLE VERBALE
ADD CONSTRAINT FK_VERBALE_TIPOVIOLAZIONE FOREIGN KEY (IDVIOLAZIONE)
REFERENCES TIPOVIOLAZIONE (IDVIOLAZIONE)


ALTER TABLE VERBALE
ADD IDANAGRAFICA INT;

ALTER TABLE VERBALE
ADD CONSTRAINT FK_VERBALE_ANAGRAFICA FOREIGN KEY (IDANAGRAFICA)
REFERENCES ANAGRAFICA (IDANAGRAFICA)

